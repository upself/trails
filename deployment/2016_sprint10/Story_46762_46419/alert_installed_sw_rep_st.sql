
------------------------------------------------
-- DDL Statements for Table "EAADMIN"."ALERT_INSTALLED_SOFTWARE"
------------------------------------------------
DROP table   EAADMIN.ALERT_INSTALLED_SOFTWARE                           
;
------------------------------------------------
-- DDL Statements for Table "EAADMIN "."ALERT_INSTALLED_SOFTWARE"
------------------------------------------------


CREATE TABLE "EAADMIN "."ALERT_INSTALLED_SOFTWARE"  (
                  "ID" BIGINT NOT NULL ,
                  "INSTALLED_SOFTWARE_ID" BIGINT NOT NULL )
                 IN "ALERTINDEX" ;

---------- Privilege For ALERT_INSTALLED_SOFTWARE ----------
GRANT REFERENCES ON TABLE "EAADMIN "."ALERT_INSTALLED_SOFTWARE"      TO GROUP "TRAILUPD" ;       
GRANT SELECT ON TABLE "EAADMIN "."ALERT_INSTALLED_SOFTWARE"          TO GROUP "TRAILSTG" ; 
GRANT SELECT ON "EAADMIN"."ALERT_INSTALLED_SOFTWARE" TO USER EAADMIN
;

---------Delete records from SUBS_MEMEBER first if exist------
DELETE FROM ASN.IBMSNAP_SUBS_MEMBR  WHERE APPLY_QUAL = 'PD_TO_ST_QUAL'
and SET_NAME ='STREP1'
and SOURCE_OWNER ='EAADMIN'
and SOURCE_TABLE = 'ALERT_INSTALLED_SOFTWARE'
and TARGET_OWNER = 'EAADMIN'
and TARGET_TABLE = 'ALERT_INSTALLED_SOFTWARE'
;
DELETE FROM ASN.IBMSNAP_SUBS_COLS WHERE APPLY_QUAL = 'PD_TO_ST_QUAL'
and SET_NAME = 'STREP1'
and TARGET_OWNER = 'EAADMIN'
and TARGET_TABLE = 'ALERT_INSTALLED_SOFTWARE'
;
---------Register columns into apply SUBS_MEMEBER-------
INSERT INTO ASN.IBMSNAP_SUBS_MEMBR (
 APPLY_QUAL, SET_NAME, WHOS_ON_FIRST, 
 SOURCE_OWNER, SOURCE_TABLE, SOURCE_VIEW_QUAL, 
 TARGET_OWNER, TARGET_TABLE, TARGET_STRUCTURE, 
 TARGET_CONDENSED, TARGET_COMPLETE, 
 PREDICATES, UOW_CD_PREDICATES, JOIN_UOW_CD, 
 MEMBER_STATE,TARGET_KEY_CHG,LOADX_TYPE, 
 LOADX_SRC_N_OWNER,LOADX_SRC_N_TABLE 
 ) VALUES (
 'PD_TO_ST_QUAL',
 'STREP1',
 'S',
 'EAADMIN',
 'ALERT_INSTALLED_SOFTWARE',
 0,
 'EAADMIN',
 'ALERT_INSTALLED_SOFTWARE',
 8,
 'Y',
 'Y',
 null,
 null,
 null,
 'N',
 'N',
 null,
 null,
 null
 );


INSERT INTO ASN.IBMSNAP_SUBS_COLS ( 
 APPLY_QUAL, SET_NAME, WHOS_ON_FIRST, 
 TARGET_OWNER, TARGET_TABLE, TARGET_NAME, 
 COL_TYPE, IS_KEY, COLNO, EXPRESSION 
 ) VALUES (
 'PD_TO_ST_QUAL',
 'STREP1',
 'S',
 'EAADMIN',
 'ALERT_INSTALLED_SOFTWARE',
 'ID',
 'A',
 'Y',
 1,
 'ID'
 );


INSERT INTO ASN.IBMSNAP_SUBS_COLS ( 
 APPLY_QUAL, SET_NAME, WHOS_ON_FIRST, 
 TARGET_OWNER, TARGET_TABLE, TARGET_NAME, 
 COL_TYPE, IS_KEY, COLNO, EXPRESSION 
 ) VALUES (
 'PD_TO_ST_QUAL',
 'STREP1',
 'S',
 'EAADMIN',
 'ALERT_INSTALLED_SOFTWARE',
 'INSTALLED_SOFTWARE_ID',
 'A',
 'Y',
 2,
 'INSTALLED_SOFTWARE_ID'
 );
 
 UPDATE ASN.IBMSNAP_SUBS_SET 
SET ACTIVATE = 1
  WHERE APPLY_QUAL = 'PD_TO_ST_QUAL'
  AND SET_NAME = 'STREP1';
 COMMIT ;